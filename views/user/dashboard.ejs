<%- include('./includes/head.ejs') %>

<%- include('./includes/navigation.ejs') %>

  <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">Panel użytkownika</h1>
    </div>
    <div class="pb-2 mb-3">
      <h1 class="h4">Twoje Dane: </h1>
      <p>Imię: <%=user.firstName%></p>
      <p>Nazwisko: <%=user.lastName%></p>
      <p>PESEL: <%=user.pesel%></p>
      <p>E-mail: <%=user.email%></p>
    </div>
    <h2>Wybory</h2>
    <% if (elections.length > 0) { %>
    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th>Rodzaj</th>
            <th>Data rozpoczęcia</th>
            <th>Data zakończenia</th>
            <th>Szczegóły</th>
          </tr>
        </thead>
        <tbody>
        <% for (let election of elections) { %>
          <tr>
            <td><%= election.type %></td>
            <td><%= election.start_date %></td>
            <td><%= election.end_date %></td>
            <td><a href="/user/election/<%=election.id%>" class="btn btn-dark btn-sm">Zobacz</a></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
    <%} else {%>
    <h2>Aktualnie nie odbywają się żadne wybory</h2>
    <% } %>
  </main>
  <%- include('./includes/footer.ejs') %>